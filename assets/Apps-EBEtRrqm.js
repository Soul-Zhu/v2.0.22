import{E as z,m as C,o as D,p as E,K as S,d as P,a as u,g as r,b as f,h as n,r as h,l as T,F as M,j as N,u as c,v as b,e as y,k as Y,s as A,n as Z,t as k,V as F,G as V}from"./main-BnXXyOo5.js";import{A as $}from"./appurl-DnExzjDg.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";const K=()=>{const I=z(),v=C([]),p=C([]),d=C(!0),m={id:"0",text:"全部",children:[]},o=C([m]);D(async()=>{await _()});const _=async()=>{const{success:e,data:s,errorMessage:a}=await E($.getPortalTopMenu.url);if(!e){S(a,"danger");return}v.value=s.children,console.log(s)},x=(e,s)=>{d.value=!1,g(String(e.Id),e.AppName)},g=async(e,s)=>{o.value.push({id:e,text:s,children:[]});const a=$.getPortalSubMenu.url.toFetchUrl({params1:e}),{success:l,data:t,errorMessage:i}=await E(a);if(!l){S(i,"danger");return}p.value=t};return{gridModel:v,onGridClick:x,isTop:d,gridChildrenModel:p,onGridChildClick:(e,s)=>{if(d.value=!1,e.children.length<=0){e.menuLinkType==="MicroApp"&&I.push({path:`/app/${e.ExtendedField1}`,replace:!1});return}else o.value.push({id:e.id,text:e.text,children:e.children}),p.value=e.children},breadcrumb:o,onBreadClick:e=>{if(e.id==="0")o.value=[m],d.value=!0,_();else{const s=o.value,a=[];for(let l=0;l<s.length;l++){const t=s[l];if(t.id===e.id)break;a.push(t)}o.value=a,e.children.length<=0?g(e.id,e.text):(o.value=[...o.value,e],p.value=e.children)}},covertExtIcons:e=>{const s=Number(e);return String.fromCharCode(s)}}},O={class:"app-center"},Q={class:"app-grid"},R={class:"app-title"},U={class:"app-bread"},H=["onClick"],J={class:"top-menu"},W={class:"grid-item"},X={class:"grid-icon"},q={key:0},ee={key:1},te={class:"grid-text"},se={class:"grid-item"},ne={class:"grid-icon"},oe={class:"grid-text"},ae=P({__name:"Apps",setup(I){const{gridModel:v,onGridClick:p,isTop:d,gridChildrenModel:m,onGridChildClick:o,breadcrumb:_,onBreadClick:x,covertExtIcons:g}=K();return(w,L)=>{const B=h("YZNav"),e=h("van-search"),s=h("van-icon"),a=h("van-grid-item"),l=h("van-grid");return r(),u("div",O,[f(B,{class:"nav-header",title:w.$t("LayOut.Apps"),rightText:""},null,8,["title"]),n("div",Q,[n("div",R,[f(e,{placeholder:"请输入搜索关键词",shape:"round"})]),n("div",U,[(r(!0),u(M,null,N(c(_),(t,i)=>(r(),u("span",{key:t.id,onClick:G=>c(x)(t)},[Y(k(t.text)+" ",1),i<c(_).length-1?(r(),A(s,{key:0,name:"arrow"})):Z("",!0)],8,H))),128))]),T(n("div",J,[f(l,{square:"",border:!1,"column-num":4},{default:y(()=>[(r(!0),u(M,null,N(c(v),(t,i)=>(r(),A(a,{key:i,onClick:G=>c(p)(t,i)},{default:y(()=>[n("div",W,[n("div",X,[Number(t.Icon)>0?(r(),u("div",q,[n("div",{style:F({color:t.IconColor,fontFamily:"yzglyphs"})},k(c(g)(t.Icon)),5)])):(r(),u("div",ee,[n("div",{class:V([t.Icon]),style:F({color:t.IconColor})},null,6)]))]),n("span",te,k(t.AppName),1)])]),_:2},1032,["onClick"]))),128))]),_:1})],512),[[b,c(d)]]),T(f(l,{square:"",border:!1,"column-num":4,class:"top-menu"},{default:y(()=>[(r(!0),u(M,null,N(c(m),(t,i)=>(r(),A(a,{key:i,onClick:G=>c(o)(t,i)},{default:y(()=>[n("div",se,[n("div",ne,[n("div",{class:V([t.iconCls]),style:{color:"#1c84ec"}},null,2)]),n("span",oe,k(t.text),1)])]),_:2},1032,["onClick"]))),128))]),_:1},512),[[b,!c(d)]])])])}}}),le=j(ae,[["__scopeId","data-v-55b6e668"]]);export{le as default};
