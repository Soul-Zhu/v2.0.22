import{d as E,W as F,m as i,o as $,x,Q as c,l as B,v as N,a as R,b as T,s as I,e as G,r as W,u,g as _,k as Y,t as Z,a4 as H}from"./main-BnXXyOo5.js";import{c as K}from"./useDefaultRow-Bhv6lFSR.js";import{u as M}from"./formWatch-KqHO0hI-.js";import O from"./YZAppAdd-CGHOUVTs.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./LoginFactory-C2TRmDIo.js";import"./wecom.prod-DVLinVsr.js";import"./dynamic-import-helper-BheWnx7M.js";import"./useInitFieldState-EKN-2KHT.js";import"./useFormEnv-VwQXjqJl.js";import"./encodeext-DBC3bVZy.js";import"./useClearnForm-ePekKxJW.js";import"./heightValidate-C1QXqfrl.js";import"./formStore-Byb73AL_.js";const z={class:"button-div"},L=E({__name:"YZGridTbutton",props:{cfg:{},formRow:{},rowId:{}},emits:["update:field"],setup(b,{emit:h}){const{WatchSelfExpress:g}=M(),m=F(),l=b,t=i(l.cfg);$(async()=>{x(()=>{k(),g(t.value,l.formRow,e=>{},e=>{t.value.hidden=e,n("update:field",t.value)},e=>{t.value.disabled=e,n("update:field",t.value)},e=>{})})});const p=i(""),s=i(!1),f=i("");let r=e=>{};const w=()=>{const e=m.getCurrentFormId,d=m.getRuningFormData(e),a=H.cloneDeep(d);c.emit(`onEvent_${e}_${l.cfg.bindModel}`,{value:"",form:a,app:{openAppAdd:(o,D,S,y)=>{r=()=>{},p.value=o,s.value=D,f.value=S,r=y}}})},n=h,k=()=>{const e=t.value,d=`setDisabled_${e.uuid}_${e.fullKey}`,a=`setHidden_${e.uuid}_${e.fullKey}`;c.on(d,o=>{t.value.disabled=o,n("update:field",t.value)}),c.on(a,o=>{t.value.hidden=o,n("update:field",t.value)})},{deleteFieldEventHandler:v}=K(),A=()=>{s.value=!1,v(!1)},C=e=>{s.value=!1,v(!1),r(e)};return(e,d)=>{const a=W("van-button");return B((_(),R("div",z,[T(a,{disabled:e.cfg.disabled,type:"primary",onClick:w,size:"small",block:""},{default:G(()=>[Y(Z(e.cfg.fieldLabel),1)]),_:1},8,["disabled"]),(_(),I(O,{"app-name":u(p),show:u(s),fmid:u(f),onOnClose:A,key:new Date().getTime(),onOnSave:C},null,8,["app-name","show","fmid"]))],512)),[[N,!e.cfg.hidden]])}}}),ie=V(L,[["__scopeId","data-v-3be33c7a"]]);export{ie as default};
