import{d as $,L as _,M as B,m as u,o as K,x as O,Q as f,a as Y,l as Z,v as z,u as s,h as R,b as C,e as W,r as k,G as j,g as G,k as H,t as I,I as L}from"./main-BnXXyOo5.js";import{u as Q}from"./formWatch-KqHO0hI-.js";import"./useFormEnv-VwQXjqJl.js";import"./encodeext-DBC3bVZy.js";import"./useInitFieldState-EKN-2KHT.js";const ee=$({__name:"YZTreedsbtn",props:_({cfg:{},formRow:{}},{modelValue:{},modelModifiers:{}}),emits:_(["update:field"],["update:modelValue"]),setup(m,{emit:V}){const{WatchSelfExpress:y}=Q(),{setFormValue:w}=L(),v=B(m,"modelValue"),x=u(v.value),n=m,a=u(n.cfg),r=u(!1);K(async()=>{O(()=>{S(),y(a.value,n.formRow,e=>{},e=>{a.value.hidden=e,i("update:field",a.value)},e=>{a.value.disabled=e,i("update:field",a.value)},e=>{})})});const T=()=>{n.cfg.disabled||(r.value=!0)},p=e=>{r.value=e},D=()=>{p(!1)},N=e=>{p(!1),M(e)},M=async e=>{const o=n.cfg;if(e.length<=0||!o.ds)return;const c=o.ds,l=o.ds.map,t=Object.keys(l),h=e[0],b=c.valueField;if(b){const d=h.extend[b];v.value=d,x.value=d}t.forEach(d=>{const E=d,F=l[d],P=h.extend[E];w(n.cfg,F,P)})},i=V,g=u(""),S=()=>{const e=a.value,o=`setDisabled_${e.uuid}_${e.fullKey}`,c=`setHidden_${e.uuid}_${e.fullKey}`,l=`setClose_${e.uuid}`;f.on(o,t=>{a.value.disabled=t,i("update:field",a.value)}),f.on(c,t=>{a.value.hidden=t,i("update:field",a.value)}),f.on(l,t=>{g.value=t})};return(e,o)=>{const c=k("van-button"),l=k("YZTreeDataDialog");return G(),Y("div",{class:j(s(g))},[Z(R("div",null,[C(c,{icon:"search",size:"small",block:"",onClick:T,disabled:s(a).disabled},{default:W(()=>[H(I(s(a).btnText),1)]),_:1},8,["disabled"]),C(l,{showPicker:s(r),multiple:!1,currentCfg:e.cfg,title:s(a).dialogTitle,ds:s(a).ds,treeCfg:s(a).treeConfig,onOnSave:N,onOnCancel:D},null,8,["showPicker","currentCfg","title","ds","treeCfg"])],512),[[z,!s(a).hidden]])],2)}}});export{ee as default};
