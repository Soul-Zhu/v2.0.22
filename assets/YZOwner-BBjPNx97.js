import{d as C,L as v,M as N,W as b,m as u,o as y,x as E,Q as p,w as M,a as R,l as S,v as B,u as d,h as W,b as k,i as I,r as O,G as U,g as $}from"./main-BnXXyOo5.js";import{u as F}from"./formWatch-KqHO0hI-.js";import{u as L}from"./useUser-BC3nwE_N.js";import"./useFormEnv-VwQXjqJl.js";import"./encodeext-DBC3bVZy.js";import"./useInitFieldState-EKN-2KHT.js";const P=C({__name:"YZOwner",props:v({cfg:{},formRow:{}},{modelValue:{type:String,default:""},modelModifiers:{}}),emits:v(["update:field"],["update:modelValue"]),setup(r,{emit:g}){const i=N(r,"modelValue"),l=r,m=b(),{WatchSelfExpress:h,WatchChageExpress:w}=F(),a=u(l.cfg),n=u("");y(async()=>{await _(i.value),E(()=>{x(),h(a.value,l.formRow,e=>{},e=>{a.value.hidden=e,c("update:field",a.value)},e=>{},e=>{})})});const{getUserInfo:V}=L(),_=async e=>{const s=m.getCurrentFormId;e||(e=m.getRuningOwnerAccount(s));const t=await V(e);t&&(i.value=e,n.value=t.name)},c=g,f=u(""),x=()=>{const e=l.cfg,s=`setHidden_${e.uuid}_${e.fullKey}`,t=`setClose_${e.uuid}`;p.on(s,o=>{a.value.hidden=o,c("update:field",a.value)}),p.on(t,o=>{f.value=o})};return M(()=>i.value,e=>{w(l.cfg,e)}),(e,s)=>{const t=O("van-field");return $(),R("div",{class:U(d(f))},[S(W("div",null,[k(t,{label:d(a).fieldLabel,disabled:"",modelValue:d(n),"onUpdate:modelValue":s[0]||(s[0]=o=>I(n)?n.value=o:null)},null,8,["label","modelValue"])],512),[[B,!d(a).hidden]])],2)}}});export{P as default};
