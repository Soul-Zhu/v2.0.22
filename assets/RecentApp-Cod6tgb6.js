import{d as z,W as O,m as p,a,g as c,h as t,l as h,b as g,u as n,r as f,v as x,F as N,j as A,i as S,E as Y,K as Z,q as b,J as j,y as i,P as F,V as $,G as D,t as E,aG as J}from"./main-BnXXyOo5.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";const W={class:""},H={class:"recent-type"},Q={class:"flex-wrap"},T=["onClick"],X={class:"grid-text"},ee={class:"flex-list"},se=["onClick"],oe={class:"list-item-text"},te=z({__name:"RecentApp",props:{apps:{},showGrid:{type:Boolean}},emits:["onCollect"],setup(G,{emit:R}){O();const B=G,U=R,y=Y(),I=e=>{y.push({path:"/post/"+e.Id,query:{name:e.ProcessName}})},m=p(!1),w=p([]),r=p(B.showGrid),C=p(),k=e=>{console.log("proce",e.IsCollection);const o=i("home.CanColl"),l=i("home.AddColl"),d=i("home.Delegation");w.value=[{name:e.IsCollection?o:l,type:"collect"},{name:d,type:"otherFill"}],m.value=!0,C.value=e},P=e=>{switch(e.type){case"otherFill":q();break;case"collect":M();break}},u=p(!1),q=()=>{u.value=!0},L=e=>{var l;if(e.length==0){Z("请选择代填人");return}const o=String((l=C.value)==null?void 0:l.Id);y.push({path:"/post/"+o,query:{memberId:e[0].memberId,providerName:e[0].providerName}})},M=async()=>{let e=C.value,o=e.IsCollection?b.cancleCollection.url.toFetchUrl({params1:e.Id}):b.addCollection.url.toFetchUrl({params1:e.Id});if((await j(o,{})).success){const d=i("home.CacnleEnd"),_=i("home.AddEnd");F({type:"success",message:e.IsCollection?`${e.textName}-${d}`:`${e.textName}-${_}`});let v=!e.IsCollection;e.IsCollection=v,U("onCollect")}else F({type:"danger",message:i("home.ControlFa")})};return(e,o)=>{const l=f("van-icon"),d=f("van-action-sheet"),_=f("YZMemberSelect"),v=J("longpress");return c(),a("div",W,[t("div",H,[t("div",{class:"rty",onClick:o[0]||(o[0]=s=>r.value=!n(r))},[g(l,{name:n(r)?"list-switch":"apps-o"},null,8,["name"])])]),h(t("div",Q,[(c(!0),a(N,null,A(e.apps,s=>(c(),a("div",{class:"flex-grid-item",key:s.Id},[h((c(),a("div",{class:"recent-app-div",onClick:V=>I(s)},[t("div",{class:"recent-app-icon",style:$({color:s.IconColor})},[t("div",{class:D([s.IconCls,"app-icon"])},null,2)],4),t("div",X,E(s.textName),1)],8,T)),[[v,()=>k(s)]])]))),128))],512),[[x,n(r)]]),h(t("div",ee,[(c(!0),a(N,null,A(e.apps,s=>h((c(),a("div",{class:"flex-list-item",key:s.Id,onClick:V=>I(s)},[t("div",{class:D([s.IconCls," app-icon list-item-icon"]),style:$({color:s.IconColor})},null,6),t("div",oe,E(s.textName),1)],8,se)),[[v,()=>k(s)]])),128))],512),[[x,!n(r)]]),g(d,{show:n(m),"onUpdate:show":o[1]||(o[1]=s=>S(m)?m.value=s:null),actions:n(w),onSelect:P,"cancel-text":e.$t("Global.Cancle"),"close-on-click-action":""},null,8,["show","actions","cancel-text"]),g(_,{show:n(u),"onUpdate:show":o[2]||(o[2]=s=>S(u)?u.value=s:null),multiple:!1,onOnSave:L},null,8,["show"])])}}}),ae=K(te,[["__scopeId","data-v-730afcc7"]]);export{ae as R};
