import{d as F,L as k,M,m as p,o as S,x as B,Z as D,Q as c,w as R,a as V,l as q,v as K,u as l,h as L,b as _,e as m,r as b,G as j,g as h,i as H,F as T,j as W,s as Z,k as Y,t as z}from"./main-BnXXyOo5.js";import{_ as G}from"./YZChangeFieldTag.vue_vue_type_style_index_0_lang-CU_sMXjx.js";import{u as I}from"./useFormEnv-VwQXjqJl.js";import{u as O}from"./formWatch-KqHO0hI-.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./encodeext-DBC3bVZy.js";import"./useInitFieldState-EKN-2KHT.js";const Q=F({__name:"YZCheckboxgroup",props:k({formRow:{},cfg:{}},{modelValue:{type:String},modelModifiers:{}}),emits:k(["update:field"],["update:modelValue"]),setup(g,{emit:C}){const o=M(g,"modelValue"),v=g,n=p([]),e=p(v.cfg),{WatchChageExpress:E,WatchSelfExpress:$}=O(),N=a=>{o.value=a.join(",")};S(()=>{B(()=>{y(),w(),$(e.value,v.formRow,a=>{o.value=a},a=>{e.value.hidden=a,t("update:field",e.value)},a=>{e.value.disabled=a,t("update:field",e.value)},a=>{e.value.hidden=a,t("update:field",e.value)})})});const w=()=>{const{getFormEnv:a}=I();if(a()===D.POST&&!o.value){const i=e.value.items.filter(d=>d.checked).map(d=>d.inputValue);o.value=i.join(","),n.value=i}else o.value&&(n.value=o.value.split(",")||[])},t=C,x=p(""),y=()=>{const a=e.value,u=`setDisabled_${a.uuid}_${a.fullKey}`,i=`setHidden_${a.uuid}_${a.fullKey}`,d=`setColumnHidden_${a.uuid}_${a.fullKey}`,f=`setRules_${a.uuid}_${a.fullKey}`,r=`setClose_${a.uuid}`;c.on(u,s=>{e.value.disabled=s,t("update:field",e.value)}),c.on(i,s=>{e.value.hidden=s,t("update:field",e.value)}),c.on(d,s=>{e.value.hidden=s,t("update:field",e.value)}),c.on(f,s=>{e.value.rules=[s],t("update:field",e.value)}),c.on(r,s=>{x.value=s})};return R(()=>o.value,(a,u)=>{E(e.value,a,v.formRow),a&&a!=u&&(n.value=String(a).split(","))}),(a,u)=>{const i=b("van-checkbox"),d=b("van-checkbox-group"),f=b("van-field");return h(),V("div",{class:j(l(x))},[q(L("div",null,[_(f,{name:l(e).bindModel,required:l(e).required,rules:l(e).rules,disabled:l(e).disabled,label:l(e).fieldLabel},{input:m(()=>[_(d,{modelValue:l(n),"onUpdate:modelValue":u[0]||(u[0]=r=>H(n)?n.value=r:null),onChange:N,disabled:l(e).disabled,direction:l(e).direction,shape:"square"},{default:m(()=>[(h(!0),V(T,null,W(l(e).items,(r,s)=>(h(),Z(i,{class:"radio-item",key:s,name:r.inputValue},{default:m(()=>[Y(z(r.boxLabel),1)]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue","disabled","direction"])]),button:m(()=>[_(G,{field:l(e)},null,8,["field"])]),_:1},8,["name","required","rules","disabled","label"])],512),[[K,!l(e).hidden]])],2)}}}),se=P(Q,[["__scopeId","data-v-123b2402"]]);export{se as default};
