import{u as A}from"./encodeext-DBC3bVZy.js";import{d as L,c as O,m as V,a as w,g as p,b as t,e as u,h as i,F as H,j as J,u as g,r,k as S,t as _,i as F,s as b,n as f}from"./main-BnXXyOo5.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"popup-warp-content"},Q={class:"filter-box"},W={class:"filter-box"},X={class:"popup-warp-button"},Y=L({__name:"EsbFilterPopup",props:{show:{type:Boolean,default:!1},ds:{default:null},schema:{default:()=>[]},viewsColumns:{},dsConfigParams:{}},emits:["onSearch","update:show"],setup(x,{emit:B}){const I={Decimal:"number",Double:"number",Single:"number",Int16:"number",Int32:"number",Int64:"number",UInt16:"number",UInt32:"number",UInt64:"number",SByte:"number",Byte:"number",Char:"string",Boolean:"bool",DateTime:"datetime",String:"string"},c=x,h=B,k=O({get:()=>(c.show&&P(),c.show),set:o=>{h("update:show",o)}}),d=V([]),P=()=>{if(!(d.value.length>0)&&c.dsConfigParams&&c.dsConfigParams.length>0){const o=c.dsConfigParams,a=c.ds;let n=a?Object.keys(a==null?void 0:a.filter):[];o.forEach(l=>{if(!n.includes(l.name)){const v={fieldText:l.name,opsText:"=",value:null,check:!0,filterType:I[l.dataType]};d.value.push(v)}})}},{isEmpty:E,encode:$,encodeBase64:D}=A(),N=()=>{const o=[];d.value&&d.value.length>0&&d.value.forEach(n=>{let l=null;n.check&&(l={name:n.fieldText,value:E(n.value)?null:n.value}),l&&o.push(l)});const a=D($(o));h("onSearch",a)},m=V(!1),y=V(-1),z=o=>{y.value=o,m.value=!0},R=()=>{d.value=[],h("onSearch","")},j=({selectedValues:o})=>{const a=y.value,n=d.value[a];n.value=o.join("/")+" 00:00:00",m.value=!1,y.value=-1};return(o,a)=>{const n=r("van-switch"),l=r("van-col"),v=r("van-field"),G=r("van-row"),C=r("van-button"),U=r("van-popup"),q=r("van-date-picker");return p(),w("div",null,[t(U,{show:g(k),"onUpdate:show":a[0]||(a[0]=e=>F(k)?k.value=e:null),position:"top","close-on-click-overlay":!0,teleport:"body","safe-area-inset-top":""},{default:u(()=>[i("div",M,[(p(!0),w(H,null,J(g(d),(e,T)=>(p(),w("div",{class:"popup-warp-item",key:T},[t(G,{gutter:"5"},{default:u(()=>[t(l,{span:"4",style:{"margin-top":"10px"}},{default:u(()=>[t(n,{size:"20",modelValue:e.check,"onUpdate:modelValue":s=>e.check=s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(l,{span:"6",class:"poup-col"},{default:u(()=>[i("div",Q,_(e.fieldText),1)]),_:2},1024),t(l,{span:"4",class:"poup-col"},{default:u(()=>[i("div",W,_(e.opsText),1)]),_:2},1024),t(l,{span:"6"},{default:u(()=>[e.filterType==="string"?(p(),b(v,{key:0,label:"",modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,placeholder:o.$t("Form.requiredField")},null,8,["modelValue","onUpdate:modelValue","placeholder"])):f("",!0),e.filterType==="number"?(p(),b(v,{key:1,label:"",modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,type:"number",placeholder:o.$t("Form.requiredField")},null,8,["modelValue","onUpdate:modelValue","placeholder"])):f("",!0),e.filterType==="bool"?(p(),b(n,{key:2,size:"20",modelValue:e.value,"onUpdate:modelValue":s=>e.value=s},null,8,["modelValue","onUpdate:modelValue"])):f("",!0),e.filterType==="datetime"?(p(),b(v,{key:3,modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,"is-link":"",readonly:"",onClick:s=>z(T),name:"datePicker"},null,8,["modelValue","onUpdate:modelValue","onClick"])):f("",!0)]),_:2},1024)]),_:2},1024)]))),128))]),i("div",X,[i("div",null,[t(C,{block:"",round:"",size:"small",type:"primary",onClick:N},{default:u(()=>[S(_(o.$t("Global.Search")),1)]),_:1})]),i("div",null,[t(C,{block:"",round:"",size:"small",onClick:R},{default:u(()=>[S(_(o.$t("Global.Reset")),1)]),_:1})])])]),_:1},8,["show"]),t(U,{show:g(m),"onUpdate:show":a[2]||(a[2]=e=>F(m)?m.value=e:null),position:"bottom"},{default:u(()=>[t(q,{onConfirm:j,onCancel:a[1]||(a[1]=e=>m.value=!1)})]),_:1},8,["show"])])}}}),ae=K(Y,[["__scopeId","data-v-b2e05d2a"]]);export{ae as default};
