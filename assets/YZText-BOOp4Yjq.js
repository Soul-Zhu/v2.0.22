import{d as S,L as p,M as k,m as _,o as q,x as M,w as K,Q as r,a as L,l as h,v as b,u as l,h as g,b as w,e as W,r as x,G as Y,aC as Z,g as $,s as F,n as H}from"./main-BnXXyOo5.js";import{_ as T}from"./YZChangeFieldTag.vue_vue_type_style_index_0_lang-CU_sMXjx.js";import{u as A}from"./formWatch-KqHO0hI-.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./encodeext-DBC3bVZy.js";import"./useFormEnv-VwQXjqJl.js";import"./useInitFieldState-EKN-2KHT.js";const j={class:"button-area"},z=S({__name:"YZText",props:p({formRow:{},cfg:{}},{modelValue:{},modelModifiers:{}}),emits:p(["update:field"],["update:modelValue"]),setup(f,{emit:C}){const t=k(f,"modelValue"),d=f,e=_(d.cfg),V=async(a,n)=>new Promise((u,c)=>{if(a){const i=Z[e.value.vtype](a,e.value.required,e.value.fieldLabel);i!==void 0?(n.message=i,u(!1)):u(!0)}else u(!0)}),{WatchChageExpress:m,WatchSelfExpress:N}=A();q(()=>{M(()=>{B(),N(e.value,d.formRow,a=>{t.value=a},a=>{e.value.hidden=a,s("update:field",e.value)},a=>{e.value.disabled=a,s("update:field",e.value)},a=>{e.value.hidden=a,s("update:field",e.value)}),d.cfg.needWatchChange&&m(d.cfg,t.value,d.formRow)})}),K(()=>t.value,(a,n)=>{m(e.value,a,d.formRow)});const y=a=>{t.value=a},s=C,v=_(""),B=()=>{const a=e.value,n=`setDisabled_${a.uuid}_${a.fullKey}`,u=`setHidden_${a.uuid}_${a.fullKey}`,c=`setColumnHidden_${a.uuid}_${a.fullKey}`,i=`setRules_${a.uuid}_${a.fullKey}`,E=`autoActiveEvent_${a.uuid}_${a.fullKey}`,R=`setClose_${a.uuid}`;r.on(n,o=>{e.value.disabled=o,s("update:field",e.value)}),r.on(u,o=>{e.value.hidden=o,s("update:field",e.value)}),r.on(c,o=>{e.value.hidden=o,s("update:field",e.value)}),r.on(i,o=>{e.value.rules=[o],e.value.required=o.required,s("update:field",e.value)}),r.on(E,o=>{m(d.cfg,t.value,d.formRow)}),r.on(R,o=>{v.value=o})};return(a,n)=>{const u=x("YZScan"),c=x("van-field");return $(),L("div",{class:Y(l(v))},[h(g("div",null,[h(w(c,{border:"",name:l(e).bindModel,label:l(e).fieldLabel,placeholder:l(e).placeholder,required:l(e).required,maxlength:l(e).maxLength,rules:[...l(e).rules,{validator:V,trigger:["onChange","onBlur"]}],disabled:l(e).disabled,clickable:"",modelValue:t.value,"onUpdate:modelValue":n[0]||(n[0]=i=>t.value=i)},{button:W(()=>[g("div",j,[l(e).showScanBtn&&!l(e).disabled?($(),F(u,{key:0,onOnScan:y})):H("",!0),w(T,{field:a.cfg},null,8,["field"])])]),_:1},8,["name","label","placeholder","required","maxlength","rules","disabled","modelValue"]),[[b,!l(e).hidden]])],512),[[b,!l(e).hidden]])],2)}}}),X=D(z,[["__scopeId","data-v-0b4bb899"]]);export{X as default};
