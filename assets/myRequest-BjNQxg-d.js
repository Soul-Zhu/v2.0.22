const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./RecordPopup-DKCYEjJ4.js","./main-BnXXyOo5.js","./main-CVDmtNd4.css","./useFormEnv-VwQXjqJl.js","./_plugin-vue_export-helper-DlAUqK2U.js","./RecordPopup-TQTAKzRY.css"])))=>i.map(i=>d[i]);
import{A as j,m as n,E as z,aI as Q,W as Y,o as $,X as G,Z as O,d as W,w as X,a as N,g as v,h,s as A,n as S,b as g,e as q,u as s,r as x,aM as J,i as K,f as ee,F as oe,_ as te,a1 as B}from"./main-BnXXyOo5.js";import{c as se,u as ne,a as re,b as ae,_ as ce}from"./useDefaultRow-Bhv6lFSR.js";import{u as ie,F as ue}from"./FormTool-uahxYRvh.js";import{u as me}from"./useProcessFormData-BB1RW82V.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./LoginFactory-C2TRmDIo.js";import"./wecom.prod-DVLinVsr.js";import"./dynamic-import-helper-BheWnx7M.js";import"./useInitFieldState-EKN-2KHT.js";import"./useFormEnv-VwQXjqJl.js";const{deleteEventHandler:d,deleteFormFieldEvent:de,deleteExtendEventHandler:fe}=se(),{getProcessRequestInfo:pe,getFormDefined:_e}=ie(),e=Y(),ve=()=>{const E=j(),R=n(""),a=n([]),c=n({}),u=n(!1),w=z(),f=n(""),m=n(""),p=n({}),{parseSrcModel:F,parseSrcComponent:r}=ne(),{createControlConfig:l}=re(),{buildProcessFormData:I}=me(),{createDefaultRow:C}=ae(),k=async()=>{const _=G(),{taskId:b}=E.params;m.value=String(b);const o=await pe(String(b));if(!o)return;const t=o.form.formId;e.setRuningFormId(t),e.setProcessRequestDefined(t,o),f.value=o.processName,R.value=o.processVersion;const y=await _e(t);if(e.setRuningSn(t,o.processInstance.serialNum),e.setRuningStartTime(t,o.processInstance.startTime),e.setRuningInitaotr(t,o.processInstance.initiatorAccount),e.setRuningOwnerAccount(t,o.processInstance.ownerAccount),o.processInstance.ouid){const i=o.processInstance.ouid.split("."),H=i[0],Z=i[1];e.setRuningProviderName(t,H),e.setRuningOuId(t,Z)}if(o.processInstance.ownerPosition){const i=o.processInstance.ownerPosition.split(".");e.setRuningMember(t,i[1])}const L=F(y.src),D=r(L);e.setRuningFunctions(t,D.funcs),e.setRuningValidators(t,D.validators);const{cfgs:M,cfgForm:ke,plains:U}=await l(D.definition,y,o.viewModel,O.REQUEST),T=I(o.viewModel.data);p.value=C(T),c.value=T,a.value=M,e.setRunningDefaultCfg(t,M),e.setRuningFormData(t,c),U.forEach(i=>{e.addRunningPlainCfg(t,i)}),sessionStorage.setItem("env","request"),u.value=!0,_&&_.remove()},V=()=>{w.go(-1)};Q(()=>{const _=e.getCurrentFormId;de(!0),fe(!0),d("onForm_MoreClose",!0),d("onForm_Agreen",!0),d("onForm_ProcessRead",!0),d("onForm_PostSubmit",!0),d("onForm_DraftSubmit",!0),e.removeFormIdData(_)}),$(async()=>{await k()});const P=n(!1);return{formData:c,fields:a,formRow:p,render:u,onLeftClick:V,processName:f,onMoreClick:()=>{P.value=!0},moreShow:P}},ge={class:"post-main"},Re={class:"post-header"},we={key:0,class:"post-form"},Fe={class:"post-button"},Ie=W({__name:"myRequest",setup(E){const{onLeftClick:R,render:a,fields:c,formData:u,processName:w,onMoreClick:f,moreShow:m,formRow:p}=ve();B("formData",u),B("formField",c),X(u,(r,l)=>{window.formDataBase=r},{deep:!0});const F=ee(()=>te(()=>import("./RecordPopup-DKCYEjJ4.js").then(r=>r.b),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url));return(r,l)=>{const I=x("van-icon"),C=x("YZNav");return v(),N(oe,null,[h("div",ge,[h("div",Re,[g(C,{title:s(w),leftText:r.$t("Global.Back"),showBack:"",onOnLeftClick:s(R),rightText:""},{right:q(()=>[g(I,{name:"more-o",size:"22",onClick:s(f)},null,8,["onClick"])]),_:1},8,["title","leftText","onOnLeftClick"])]),g(J,{name:"van-slide-left"},{default:q(()=>[s(a)?(v(),N("div",we,[g(ce,{cfg:s(c),ref:"formRef",formRow:s(p)},null,8,["cfg","formRow"])])):S("",!0)]),_:1}),h("div",Fe,[s(a)?(v(),A(ue,{key:0,env:s(O).REQUEST},null,8,["env"])):S("",!0)])]),s(a)?(v(),A(s(F),{key:0,"more-show":s(m),"onUpdate:moreShow":l[0]||(l[0]=k=>K(m)?m.value=k:null)},null,8,["more-show"])):S("",!0)],64)}}}),Ae=le(Ie,[["__scopeId","data-v-12d7417c"]]);export{Ae as default};
