import{d as C,L as v,W as R,M as S,m as c,c as b,o as x,x as E,w as M,Q as g,a as N,l as B,v as U,u as r,h as W,b as $,i as k,r as F,G,g as L}from"./main-BnXXyOo5.js";import{u as z}from"./formWatch-KqHO0hI-.js";import{u as A}from"./useUser-BC3nwE_N.js";import"./useFormEnv-VwQXjqJl.js";import"./encodeext-DBC3bVZy.js";import"./useInitFieldState-EKN-2KHT.js";const Z=C({__name:"YZInitiator",props:v({cfg:{},formRow:{}},{modelValue:{type:String,default:""},modelModifiers:{}}),emits:v(["update:field"],["update:modelValue"]),setup(m,{emit:h}){const i=R(),{getUserInfo:V}=A(),{WatchSelfExpress:w,WatchChageExpress:y}=z(),s=S(m,"modelValue"),n=m,t=c(n.cfg),l=c(""),I=b(()=>{if(s.value)return u(s.value),s.value;{const e=i.getCurrentFormId,a=i.getRuningInitaotr(e);return s.value=a,a&&u(a),i.getRuningInitaotr(e)}});x(async()=>{E(async()=>{_(),w(t.value,n.formRow,e=>{},e=>{t.value.hidden=e,f("update:field",t.value)},e=>{},e=>{})})});const u=async e=>{if(!e)return"";const a=await V(e);a&&(l.value=a.name)};M(I,async e=>{s.value||await u(e),y(n.cfg,e)});const f=h,p=c(""),_=()=>{const e=n.cfg,a=`setHidden_${e.uuid}_${e.fullKey}`,d=`setClose_${e.uuid}`;g.on(a,o=>{t.value.hidden=o,f("update:field",t.value)}),g.on(d,o=>{p.value=o})};return(e,a)=>{const d=F("van-field");return L(),N("div",{class:G(r(p))},[B(W("div",null,[$(d,{label:r(t).fieldLabel,disabled:"",placeholder:e.$t("Form.systemGenerate"),modelValue:r(l),"onUpdate:modelValue":a[0]||(a[0]=o=>k(l)?l.value=o:null)},null,8,["label","placeholder","modelValue"])],512),[[U,!r(t).hidden]])],2)}}});export{Z as default};
