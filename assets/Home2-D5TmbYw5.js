import{p as T,q as b,E as V,m as _,o as z,C as O,w as F,J as H,aF as A,d as j,B as q,a as k,g as f,h as s,b as U,e as x,u as n,r as N,t as L,F as $,j as E,s as G,n as Q,l as J,v as K,V as M,G as W}from"./main-BnXXyOo5.js";import{R as X}from"./RecentApp-Cod6tgb6.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Z=""+new URL("daiban-CLSfgk1f.svg",import.meta.url).href,tt=""+new URL("zhihui-TvMOncKA.svg",import.meta.url).href,ot=()=>({loadCollectionData:()=>new Promise((c,g)=>{T(b.getMyCollection.url,{page:1,start:0,limit:25}).then(a=>{const{success:d,data:l}=a;if(d){const{data:m}=l,h=Array.from(m);h.forEach(o=>{o.MobileInitiation&&(o.textName=o.ProcessName,o.ShortName&&(o.textName=o.ShortName))}),c(h)}})}),loadCommoonUseData:()=>new Promise((c,g)=>{T(b.getCommonuseProcss.url,{page:1,start:0,limit:25}).then(a=>{const{success:d,data:l}=a,{data:m}=l,h=Array.from(m);c(h)})}),convertComonUseData:(c,g)=>(c.forEach(a=>{a.MobileInitiation&&(a.textName=a.ProcessName,a.ShortName&&(a.textName=a.ShortName),g.find(l=>l.ProcessName===a.ProcessName)&&(a.IsCollection=!0))}),c)}),B=O(A),{loadCollectionData:st,loadCommoonUseData:et,convertComonUseData:at}=ot(),nt=()=>{const u=V(),C=_([]),r=_(!0),c=_([]);z(async()=>{await d();const t=await st(),e=await et();C.value=at(e,t);const v=document.getElementById("imgsdd");v&&(v.onload=()=>{console.log("aaaa"),r.value=!1}),c.value=new Array(B.getBannerData.length).fill(!1)});const g=t=>{c.value[t]=!0},a=()=>{},d=async()=>{B.getNotify&&await S()};F(()=>B.getNotify,async t=>{t&&await d()},{});const l=_(0),m=_([]),h=_([]),o=_([]),S=async()=>{w("通知").then(t=>{if(t.success){const{data:e}=t;m.value=e.children}}),w("公司文化").then(t=>{if(t.success){const{data:e}=t;o.value=e.children}}),w("新闻").then(t=>{if(t.success){const{data:e}=t;h.value=e.children}})},w=async t=>new Promise((e,v)=>{const p=new FormData;p.append("page",String(1)),p.append("start",String(0)),p.append("limit",String(8)),p.append("Type",t),H(b.getNews.url,p).then(D=>{e(D)}).catch(D=>{v(D)})});return{onGridClick:t=>{if(t.linkType==="Vue")if(t.linkUrl.indexOf("?")>-1){const e=t.linkUrl.split("?"),v=e[0],p=e[1],P=new URLSearchParams(p).get("type");u.push({path:`${v}`,query:{type:P},replace:!1})}else u.push({path:`${t.linkUrl}`,replace:!1});else window.open(t.linkUrl,"_blank")},notifyActive:l,onRowClick:t=>{const e=t.TaskID;u.push({path:`/preview/622177853534277/${e}`,replace:!1})},notfiyData:m,gswhData:h,gsxwData:o,notiysClick:()=>{u.push({path:`/layout/notfiys/${l.value}`})},commonUseData:C,onCollect:a,onCardClick:t=>{if(t.indexOf("?")>-1){const e=t.split("?"),v=e[0],p=e[1],P=new URLSearchParams(p).get("type");u.push({path:`${v}`,query:{type:P},replace:!1})}else u.push({path:t,replace:!1})},scloading:r,imageLoad:g,imageloadData:c}},ct={class:"home-home-page-new"},it={class:"home-banner-div"},lt=["src","onLoad"],rt={class:"home-container"},dt={class:"home-static-div"},mt={class:"home-static-item1-text"},pt={class:"home-static-number"},ut={class:"home-static-item2-text"},ht={class:"home-static-number"},vt={class:"home-quicty-div"},ft=["onClick"],gt={key:0,class:"grid-icon"},yt=["src"],_t={class:"grid-text"},Ct={class:"home-collection"},kt={class:"collection-container",style:{"flex-direction":"column"}},wt=j({__name:"Home2",setup(u){const C=q(A),r=O(A),{onGridClick:c,commonUseData:g,onCollect:a,onCardClick:d,imageLoad:l,imageloadData:m}=nt();return(h,o)=>{const S=N("van-skeleton-image"),w=N("van-skeleton"),I=N("van-swipe-item"),R=N("van-swipe");return f(),k("div",ct,[s("div",it,[U(R,{class:"my-swipe",autoplay:n(r).getInterTime,loop:n(r).getLoopPaly,"show-indicators":n(r).getShowPoint},{default:x(()=>[(f(!0),k($,null,E(n(r).getBannerData,(i,y)=>(f(),G(I,{key:y},{default:x(()=>[n(m)[y]?Q("",!0):(f(),G(w,{key:0,title:"",row:3},{template:x(()=>[U(S,{class:"skingimage"})]),_:1})),J(s("img",{src:i,onLoad:t=>n(l)(y)},null,40,lt),[[K,n(m)[y]]])]),_:2},1024))),128))]),_:1},8,["autoplay","loop","show-indicators"])]),s("div",rt,[s("div",dt,[s("div",{class:"home-static-item1",onClick:o[0]||(o[0]=i=>n(d)("/layout/task"))},[s("div",mt,[o[2]||(o[2]=s("div",{class:"home-static-title"},"我的待办",-1)),s("div",pt,L(n(C).getTaskCount),1)]),o[3]||(o[3]=s("div",{class:"home-static-item1-icon"},[s("img",{src:Z,alt:""})],-1))]),s("div",{class:"home-static-item2",onClick:o[1]||(o[1]=i=>n(d)("/layout/task?type=1"))},[s("div",ut,[o[4]||(o[4]=s("div",{class:"home-static-title"},"我的知会",-1)),s("div",ht,L(n(C).getInformCount),1)]),o[5]||(o[5]=s("div",{class:"home-static-item2-icon"},[s("img",{src:tt,alt:""})],-1))])]),s("div",vt,[(f(!0),k($,null,E(n(r).getQuickData,(i,y)=>(f(),k("div",{class:"quicty-grid",key:y,style:M({background:i.iconBgColor}),onClick:t=>n(c)(i)},[i.iconType===0?(f(),k("div",gt,[s("img",{src:i.iconName,alt:""},null,8,yt)])):(f(),k("div",{key:1,class:W([i.iconName]),style:M({color:i.iconColor})},null,6)),s("div",_t,L(i.appName),1)],12,ft))),128))]),s("div",Ct,[o[6]||(o[6]=s("div",{class:"collection-title"}," 常用流程 ",-1)),s("div",kt,[U(X,{apps:n(g),onOnCollect:n(a),"show-grid":!0},null,8,["apps","onOnCollect"])])])]),o[7]||(o[7]=s("div",{class:"home-notify"},null,-1))])}}}),Pt=Y(wt,[["__scopeId","data-v-af67c016"]]);export{Pt as default};
