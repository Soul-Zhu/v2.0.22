var L=Object.defineProperty;var R=(s,n,l)=>n in s?L(s,n,{enumerable:!0,configurable:!0,writable:!0,value:l}):s[n]=l;var p=(s,n,l)=>R(s,typeof n!="symbol"?n+"":n,l);import{aP as S,d as A,c as J,m,aV as Q,o as W,w as z,r as i,a as _,g as f,b as r,e as d,h as P,R as B,s as O,n as w,F as K,j as X,p as Z,q as T,P as y,y as g,aW as x,J as ee}from"./main-BnXXyOo5.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";class ae{constructor(n){p(this,"from");p(this,"state");p(this,"to");if(this.from="",this.to="",this.state="InOffice",n){const{Data:l}=n;this.state=l.OutOfOfficeState,this.state==="Period"&&(this.from=S(l.OutOfOfficeFrom).format("YYYY-MM-DD HH:mm"),this.to=S(l.OutOfOfficeTo).format("YYYY-MM-DD HH:mm"))}}}const oe={class:"service-div"},ne=A({__name:"OutOfficePop",props:{isPop:{type:Boolean,default:!1,required:!1},item:{type:Object,required:!0}},setup(s){const n=s,l=J(()=>n.isPop),V=m(0),a=m({from:"",to:"",state:"InOffice"}),Y=Q(new Date),h=m([]),$=m(["00","00"]);W(async()=>{h.value=Y});const j=async()=>{const{data:e}=await Z(T.getOutSetting.url);e&&(a.value=new ae(e))},M=m([{name:"my.InOffice",value:"InOffice"},{name:"my.OutOffice",value:"Out"},{name:"my.OutTime",value:"Period"}]),I=async()=>{const e={};if(a.value.state==="Period"){if(!a.value.from){y({type:"danger",message:g("my.STime")});return}if(!a.value.to){y({type:"danger",message:g("my.ETime")});return}if(x(a.value.from,a.value.to)<0){y({type:"danger",message:g("my.TimeSet")});return}e.OutOfOfficeFrom=a.value.from,e.OutOfOfficeState=a.value.state,e.OutOfOfficeTo=a.value.to}e.OutOfOfficeState=a.value.state,(await ee(T.saveOutSetting.url,e)).success&&y({type:"success",message:g("home.ControlSu")})},U=e=>{a.value.state=e.value},c=m(!1),C=e=>{V.value=e,c.value=!0},E=e=>{const t=e[0].selectedValues,v=e[1].selectedValues;V.value===1?a.value.from=t.map(u=>u).join("-")+" "+v.map(u=>u).join(":"):a.value.to=t.map(u=>u).join("-")+" "+v.map(u=>u).join(":"),c.value=!1};return z(l,async e=>{e&&await j()}),(e,t)=>{const v=i("van-nav-bar"),u=i("van-icon"),F=i("van-cell"),D=i("van-field"),H=i("van-cell-group"),b=i("van-popup"),N=i("van-date-picker"),q=i("van-time-picker"),G=i("van-picker-group");return f(),_("div",null,[r(b,{show:l.value,"onUpdate:show":t[5]||(t[5]=o=>l.value=o),position:"right",style:{heigth:"100vh",width:"100%"}},{default:d(()=>[P("div",oe,[r(v,{title:e.$t(s.item.name),"left-text":e.$t("Global.Back"),onClickLeft:t[0]||(t[0]=B(o=>s.item.onBack(s.item.name),["stop"])),"left-arrow":"","right-text":e.$t("Global.Save"),onClickRight:B(I,["stop"])},null,8,["title","left-text","right-text"]),P("div",null,[r(H,null,{default:d(()=>[(f(!0),_(K,null,X(M.value,o=>(f(),O(F,{onClick:k=>U(o),key:o.name,title:e.$t(o.name)},{default:d(()=>{var k;return[o.value===((k=a.value)==null?void 0:k.state)?(f(),O(u,{key:0,slot:"right-icon",name:"success",color:"#4caf50",class:"van-cell__right-icon"})):w("",!0)]}),_:2},1032,["onClick","title"]))),128)),a.value.state==="Period"?(f(),O(D,{key:0,name:e.$t("my.OutBeginDate"),label:e.$t("my.OutBeginDate"),placeholder:e.$t("my.pleaseChoiceStart"),modelValue:a.value.from,"onUpdate:modelValue":t[1]||(t[1]=o=>a.value.from=o),onClick:t[2]||(t[2]=o=>C(1)),readonly:""},null,8,["name","label","placeholder","modelValue"])):w("",!0),a.value.state==="Period"?(f(),O(D,{key:1,readonly:"",name:e.$t("my.OutEndDate"),label:e.$t("my.OutEndDate"),placeholder:e.$t("my.pleaseChoiceEnd"),modelValue:a.value.to,"onUpdate:modelValue":t[3]||(t[3]=o=>a.value.to=o),onClick:t[4]||(t[4]=o=>C(2))},null,8,["name","label","placeholder","modelValue"])):w("",!0)]),_:1})])])]),_:1},8,["show"]),r(b,{show:c.value,"onUpdate:show":t[9]||(t[9]=o=>c.value=o),position:"bottom"},{default:d(()=>[r(G,{title:e.$t("my.appointmentDate"),tabs:[e.$t("my.choiceDate"),e.$t("my.choieTime")],onConfirm:E,onCancel:t[8]||(t[8]=o=>c.value=!1)},{default:d(()=>[r(N,{modelValue:h.value,"onUpdate:modelValue":t[6]||(t[6]=o=>h.value=o)},null,8,["modelValue"]),r(q,{modelValue:$.value,"onUpdate:modelValue":t[7]||(t[7]=o=>$.value=o)},null,8,["modelValue"])]),_:1},8,["title","tabs"])]),_:1},8,["show"])])}}}),ie=te(ne,[["__scopeId","data-v-409c72b6"]]);export{ie as default};
