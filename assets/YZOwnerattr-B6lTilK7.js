import{d as S,L as g,W as I,M as R,m as b,c as u,w as h,o as $,Z as k,x as B,Q as w,a as W,l as P,v as L,u as m,h as O,b as T,r as U,G as Z,g as z}from"./main-BnXXyOo5.js";import{u as D}from"./formWatch-KqHO0hI-.js";import{u as G}from"./useUser-BC3nwE_N.js";import{u as H}from"./useFormEnv-VwQXjqJl.js";import"./encodeext-DBC3bVZy.js";import"./useInitFieldState-EKN-2KHT.js";const J=S({__name:"YZOwnerattr",props:g({cfg:{},formRow:{}},{modelValue:{type:String,default:""},modelModifiers:{}}),emits:g(["update:field"],["update:modelValue"]),setup(c,{emit:M}){const r=I(),n=R(c,"modelValue"),l=c,s=b(l.cfg),{WatchSelfExpress:V,WatchChageExpress:E}=D(),i=u(()=>r.getCurrentFormId),d=u(()=>r.getRuningMember(i.value)),C=u(()=>r.getRuningProviderName(i.value)),{getMemberInfo:N}=G(),{getFormEnv:_}=H(),x=_(),f=async e=>{const t=`${C.value}.${e}`,o=await N(t);if(o){const a=l.cfg.attrName;n.value=y(o,a)}};h(d,async(e,t)=>{await f(e)}),h(()=>n.value,async(e,t)=>{E(l.cfg,e)}),$(async()=>{x===k.POST&&!n.value&&await f(d.value),B(()=>{F(),V(s.value,l.formRow,e=>{},e=>{s.value.hidden=e,v("update:field",s.value)},e=>{},e=>{})})});const y=(e,t)=>{if(!t)return"";const o=t.split(".");for(const a of o)e=e[a];return e},v=M,p=b(""),F=()=>{const e=l.cfg,t=`setHidden_${e.uuid}_${e.fullKey}`,o=`setClose_${e.uuid}`;w.on(t,a=>{s.value.hidden=a,v("update:field",s.value)}),w.on(o,a=>{p.value=a})};return(e,t)=>{const o=U("van-field");return z(),W("div",{class:Z(m(p))},[P(O("div",null,[T(o,{label:m(s).fieldLabel,disabled:"",modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=a=>n.value=a)},null,8,["label","modelValue"])],512),[[L,!m(s).hidden]])],2)}}});export{J as default};
