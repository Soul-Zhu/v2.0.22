import{u as C}from"./formStore-Byb73AL_.js";import{m as S,W as V,d as J,L as N,M as O,a as j,g as M,b as B,r as k,e as U,h as P,z as b}from"./main-BnXXyOo5.js";import"./encodeext-DBC3bVZy.js";import"./heightValidate-C1QXqfrl.js";const z=()=>{const r=S({}),v=t=>{r.value=t},h=C(),d=(t,n)=>n?g(t,n):w(t),p=(t,n,o)=>{if(o)return g(t,o);r.value[t]=n},f=()=>r.value,w=t=>r.value[t],g=(t,n)=>{const o=h.pliansFields;let a="";const s=o.find(l=>l.fullKey===t);if(!s)return a;const i=n.split("/").map(l=>Number(l));let e=JSON.parse(JSON.stringify(r.value));const u=s.fullPath.replace("$$root.","").split("."),y=["formData"];for(let l=0;l<u.length;l++){const D=u[l],$=e[D];if(y.push(`["${D}"]`),l===u.length-1)break;$ instanceof Array&&(y.push(`[${i[l]}]`),e=$[i[l]])}return m(y.join(""))},F=(t,n)=>{const o=n.split("/").map(s=>Number(s)),a=t.split(".");if(o.length!==a.length)return{};if(o.length===1){const s=["formData"];return s.push(`["${t}"][${o[0]}]`),m(s.join(""))}else{const s=["formData"];let i=JSON.parse(JSON.stringify(r.value));for(let e=0;e<a.length;e++){const c=a[e],u=i[c];if(s.push(`["${c}"]`),e===a.length-1){s.push(`[${o[e]}]`);break}else u instanceof Array&&(s.push(`[${o[e]}]`),i=u[o[e]])}return m(s.join(""))}},A=(t,n)=>{if(n){const o=n.split("/").map(e=>Number(e)),a=["formData"];let s=JSON.parse(JSON.stringify(r.value));const i=t.split(".");for(let e=0;e<i.length;e++){const c=i[e];if(!s)return{};const u=s[c];if(a.push(`["${c}"]`),e===i.length-1)break;u instanceof Array&&(a.push(`[${o[e]}]`),s=u[o[e]])}return m(a.join(""))}else{const o=["formData"];return o.push(`["${t}"]`),m(o.join(""))}},m=t=>new Function("formData",`return ${t}`)(r.value);return{formUtil:{getFieldValue:d,getFormData:f,getTableRowData:F,getTableData:A,setFieldValue:p},initFormData:v}};V();const E=J({__name:"GobalPopup",props:N({title:{default:"提交验证"}},{show:{type:Boolean,default:!1},showModifiers:{}}),emits:N(["onConfirm","onCancel"],["update:show"]),setup(r,{emit:v}){const h=O(r,"show"),d=v;return(p,f)=>{const w=k("van-dialog");return M(),j("div",null,[B(w,{show:h.value,"onUpdate:show":f[0]||(f[0]=g=>h.value=g),title:p.title,onConfirm:f[1]||(f[1]=()=>d("onConfirm")),onCancel:f[2]||(f[2]=()=>d("onCancel")),"before-close":()=>!1,"show-cancel-button":""},{default:U(()=>[P("div",null,[b(p.$slots,"tip"),b(p.$slots,"field")])]),_:3},8,["show","title"])])}}});export{E as _,z as u};
