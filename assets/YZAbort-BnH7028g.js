const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./AbortPopup-Dy6oUP1I.js","./main-BnXXyOo5.js","./main-CVDmtNd4.css","./_plugin-vue_export-helper-DlAUqK2U.js","./AbortPopup-Zgch3Pms.css"])))=>i.map(i=>d[i]);
import{d as C,W as P,c as A,m as I,a as w,b as l,e as N,r as k,u,f as R,F as S,_ as y,g as F,k as D,t as T,A as B,E,Q as M,K as O,a0 as V,y as m}from"./main-BnXXyOo5.js";import{a as L}from"./app.hook-BvqEBUQR.js";import{P as W}from"./ProcessServices-D_wUXXVf.js";import"./LoginFactory-C2TRmDIo.js";import"./wecom.prod-DVLinVsr.js";const j=C({__name:"YZAbort",props:{btnName:{},componentName:{},action:{},icon:{},others:{},hairline:{type:Boolean},env:{}},setup(x){const p=R(()=>y(()=>import("./AbortPopup-Dy6oUP1I.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url)),s=P(),r=A(()=>s.getCurrentFormId),f=async()=>{M.emit("onForm_MoreClose",!1),o.value=!0},o=I(!1),d=()=>{o.value=!1},_=new W,b=B(),g=E(),v=async e=>{const{taskId:a}=b.params,{success:n,errorMessage:h}=await _.onAbortTask(e,String(a));if(!n){O(h,"danger");return}o.value=!1;let t="";const c=s.getRuningProcessInfoDefined(r.value),i=s.getProcessReadDefined(r.value);c&&(t=c.processInstance.serialNum),i&&(t=i.processInstance.serialNum),V({title:m("Form.TipTitle"),message:m("Form.AbortMsg",{sn:t})}).then(()=>{L(g)})};return(e,a)=>{const n=k("van-button");return F(),w(S,null,[l(n,{icon:e.icon,hairline:e.hairline,size:"small",onClick:f,block:""},{default:N(()=>[D(T(e.btnName),1)]),_:1},8,["icon","hairline"]),l(u(p),{show:u(o),onOnProcessAbortCancel:d,onOnProcessAbortConfirm:v},null,8,["show"])],64)}}});export{j as default};
