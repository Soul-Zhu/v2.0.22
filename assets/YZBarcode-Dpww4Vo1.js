import{d as E,L as g,M as S,m as r,o as I,x as M,Q as c,a as _,l as N,v as $,u as t,h as u,b as L,e as w,r as R,G as W,q as k,U as H,g as b,V as U,n as q,t as z}from"./main-BnXXyOo5.js";import{u as A}from"./formWatch-KqHO0hI-.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useFormEnv-VwQXjqJl.js";import"./encodeext-DBC3bVZy.js";import"./useInitFieldState-EKN-2KHT.js";const F={key:0},K=["src"],Q=E({__name:"YZBarcode",props:g({cfg:{},formRow:{}},{modelValue:{type:String},modelModifiers:{}}),emits:g(["update:field"],["update:modelValue"]),setup(m,{emit:x}){const{WatchChageExpress:y,WatchSelfExpress:B}=A(),C=S(m,"modelValue"),p=r(""),l=m,o=r(l.cfg),h=e=>{const s=l.cfg;let n=window.webConfig.host+k.getBarcode.url;H.request({url:n,method:"get",params:{text:e,width:s.ImgWidth,height:s.ImgHeight,format:s.barcodeFormat},responseType:"blob"}).then(({data:d})=>{const i=new Blob([d],{type:"image/png"}),a=window.URL.createObjectURL(i);p.value=a}).catch(d=>{console.log("创建动态码失败",d)})};I(()=>{M(()=>{V(),B(o.value,l.formRow,e=>{h(e)},e=>{o.value.hidden=e,f("update:field",o.value)},e=>{},e=>{})})});const f=x,v=r(""),V=()=>{const e=o.value,s=`setHidden_${e.uuid}_${e.fullKey}`,n=`autoActiveEvent_${e.uuid}_${e.fullKey}`,d=`onComputed_Bardcode_${e.uuid}`,i=`setClose_${e.uuid}`;c.on(s,a=>{o.value.hidden=a,f("update:field",o.value)}),c.on(n,a=>{y(l.cfg,C.value,l.formRow)}),c.on(d,a=>{h(a)}),c.on(i,a=>{v.value=a})};return(e,s)=>{const n=R("van-field");return b(),_("div",{class:W(t(v))},[N(u("div",null,[L(n,{readonly:"",name:t(o).bindModel,placeholder:t(o).placeholder},{label:w(()=>[t(o).ShowLabel?(b(),_("div",F,z(t(o).fieldLabel),1)):q("",!0)]),input:w(()=>[u("div",{class:"code",style:U({width:t(o).ImgWidth+"px",height:t(o).ImgHeight+"px"})},[u("img",{src:t(p),alt:""},null,8,K)],4)]),_:1},8,["name","placeholder"])],512),[[$,!t(o).hidden]])],2)}}}),J=D(Q,[["__scopeId","data-v-0de41427"]]);export{J as default};
