import{d as P,c as $,m as k,A as z,q as A,p as O,K as Y,y as E,s as V,e as l,i as R,u as i,r,g as C,h as j,b as m,a as G,j as K,k as F,t as w,F as Q}from"./main-BnXXyOo5.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";const J=P({__name:"RemindPopup",props:{show:{type:Boolean,default:!1}},emits:["onRemaindCancel","onRemaindConfirm"],setup(T,{expose:U,emit:M}){const x=T,d=$(()=>(x.show&&D(),x.show)),y=M,n=k([]),s=k(""),p=k([]),N=()=>{b(),y("onRemaindCancel")},b=()=>{s.value="",n.value.length=0};U({clearRemaind:b});const S=()=>{if(!s.value||n.value.length==0)return;const a=[];n.value.forEach(o=>{const t=p.value.find(u=>u.StepID===o);t&&a.push({stepid:o,uids:[t.Account]})}),y("onRemaindConfirm",s.value,a)},B=z(),D=()=>{const{taskId:a}=B.params,o=A.getRemainTask.url.toFetchUrl({params1:a});return new Promise((t,u)=>{O(o).then(f=>{const{data:v,success:_,errorMessage:h}=f;if(!_)Y(h,"danger"),u(!1);else{const e=v;e.forEach(g=>{const c=Math.round(g.ElapsedMinutes);if(c>60){const I=Math.floor(c/60),L=c%60,q=E("Form.Times",{h:I,m:L});g.ElaspEdText=q}else g.ElaspEdText=c+E("Form.mulit")}),p.value=e,t(!0)}})})};return(a,o)=>{const t=r("van-checkbox"),u=r("van-tag"),f=r("van-cell"),v=r("van-checkbox-group"),_=r("van-field"),h=r("van-dialog");return C(),V(h,{show:i(d),"onUpdate:show":o[2]||(o[2]=e=>R(d)?d.value=e:null),teleport:"body",title:a.$t("Form.Urging"),onConfirm:S,onCancel:N,"before-close":()=>!1,"show-cancel-button":""},{default:l(()=>[j("div",null,[m(v,{modelValue:i(n),"onUpdate:modelValue":o[0]||(o[0]=e=>R(n)?n.value=e:null),shape:"square"},{default:l(()=>[(C(!0),G(Q,null,K(i(p),e=>(C(),V(f,{key:e.StepID},{title:l(()=>[m(t,{name:e.StepID},{default:l(()=>[F(w(e.NodeDisplayName)+"("+w(e.ShortName)+")",1)]),_:2},1032,["name"])]),value:l(()=>[m(u,{type:"primary",size:"large"},{default:l(()=>[F(w(e.ElaspEdText),1)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["modelValue"]),m(_,{rows:"2",autosize:"",label:a.$t("Form.UrgOpinionLY"),type:"textarea",placeholder:a.$t("Form.UrgOpinionLY"),modelValue:i(s),"onUpdate:modelValue":o[1]||(o[1]=e=>R(s)?s.value=e:null),required:""},null,8,["label","placeholder","modelValue"])])]),_:1},8,["show","title"])}}}),Z=H(J,[["__scopeId","data-v-55ca9f93"]]);export{Z as default};
